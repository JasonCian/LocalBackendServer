:root {
  --mp-bg: #0f1117;
  --mp-panel: #151926;
  --mp-panel-2: #1c2132;
  --mp-text: #e6e8ef;
  --mp-muted: #98a0b5;
  --mp-accent: #6fa3ef;
  --mp-accent-2: #e5a545;
  --mp-border: #2a3042;
  --mp-radius: 12px;
  --mp-radius-sm: 8px;
  --mp-shadow: 0 18px 50px rgba(0, 0, 0, 0.35);
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
  background: radial-gradient(900px 620px at 12% 10%, rgba(111, 163, 239, 0.08), transparent),
    radial-gradient(780px 540px at 80% 0%, rgba(229, 165, 69, 0.08), transparent),
    linear-gradient(135deg, #0f1117 0%, #0b0d13 100%);
  color: var(--mp-text);
  line-height: 1.7;
}

.page-shell {
  max-width: 1100px;
  margin: 0 auto;
  padding: 22px 16px 64px;
}

.page-header {
  position: sticky;
  top: 0;
  z-index: 10;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 12px;
  align-items: center;
  padding: 14px 18px;
  margin-bottom: 14px;
  background: rgba(21, 25, 38, 0.9);
  border: 1px solid var(--mp-border);
  border-radius: var(--mp-radius);
  box-shadow: var(--mp-shadow);
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
}

.file-info {
  min-width: 0;
}

.file-title {
  font-size: 1.25rem;
  font-weight: 650;
  letter-spacing: 0.2px;
  margin: 0;
}

.file-path {
  color: var(--mp-muted);
  font-size: 0.9rem;
  margin-top: 4px;
  word-break: break-all;
}

.file-meta {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 8px;
}

.meta-list {
  list-style: none;
  display: flex;
  gap: 8px;
  padding: 0;
  margin: 0;
  flex-wrap: wrap;
}

.meta-label {
  color: var(--mp-muted);
  font-size: 0.85rem;
  margin-right: 4px;
}

.meta-value {
  font-size: 0.9rem;
  color: var(--mp-text);
  padding: 4px 8px;
  border-radius: var(--mp-radius-sm);
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid var(--mp-border);
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 10px;
}

.action-link {
  color: var(--mp-accent);
  text-decoration: none;
  padding: 6px 10px;
  border: 1px solid var(--mp-border);
  border-radius: var(--mp-radius-sm);
  background: rgba(111, 163, 239, 0.08);
  font-size: 0.9rem;
}

.action-link:hover {
  border-color: var(--mp-accent);
}

.theme-switch {
  color: var(--mp-muted);
  font-size: 0.9rem;
}

.theme-select {
  min-width: 150px;
  padding: 6px 8px;
  border-radius: var(--mp-radius-sm);
  border: 1px solid var(--mp-border);
  background: rgba(255, 255, 255, 0.03);
  color: var(--mp-text);
}

.theme-select:focus {
  outline: 1px solid var(--mp-accent);
  border-color: var(--mp-accent);
}

.content-wrapper {
  background: rgba(21, 25, 38, 0.88);
  border: 1px solid var(--mp-border);
  border-radius: var(--mp-radius);
  padding: 22px 20px;
  box-shadow: var(--mp-shadow);
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
}

#write {
  max-width: 920px;
  margin: 0 auto;
  color: var(--mp-text);
  overflow-x: auto;
}

#write a {
  color: var(--mp-accent);
}

#write pre {
  background: var(--mp-panel-2);
  border: 1px solid var(--mp-border);
  border-radius: var(--mp-radius-sm);
  padding: 14px;
  overflow: auto;
}

#write code {
  font-family: "JetBrains Mono", "Fira Code", Menlo, Consolas, monospace;
}

.md-toc {
  border: 1px solid var(--mp-border);
  border-radius: var(--mp-radius-sm);
  background: rgba(255, 255, 255, 0.02);
  padding: 12px;
  margin: 14px 0;
}

.toc-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.toc-item {
  margin: 4px 0;
}

.toc-level-2 { padding-left: 14px; }
.toc-level-3 { padding-left: 24px; }
.toc-level-4 { padding-left: 36px; }
.toc-level-5 { padding-left: 50px; }
.toc-level-6 { padding-left: 66px; }

.toc-item a {
  color: var(--mp-text);
  text-decoration: none;
  border-bottom: 1px dashed transparent;
}

.toc-item a:hover {
  color: var(--mp-accent);
  border-bottom-color: var(--mp-accent);
}

.md-callout {
  position: relative;
  border-left: 4px solid var(--mp-accent);
  padding: 12px 14px 12px 46px;
  margin: 16px 0;
  background: rgba(111, 163, 239, 0.08);
  border-radius: var(--mp-radius-sm);
  color: var(--mp-text);
}

.md-callout::before {
  content: attr(data-callout-label);
  position: absolute;
  top: 10px;
  left: 12px;
  font-size: 0.75rem;
  font-weight: 700;
  letter-spacing: 0.5px;
  padding: 4px 6px;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.08);
  color: var(--mp-text);
}

.md-callout-note {
  border-color: #6fa3ef;
  background: rgba(111, 163, 239, 0.10);
}

.md-callout-tip {
  border-color: #22c55e;
  background: rgba(34, 197, 94, 0.10);
}

.md-callout-important {
  border-color: #d97706;
  background: rgba(217, 119, 6, 0.12);
}

.md-callout-warning {
  border-color: #f97316;
  background: rgba(249, 115, 22, 0.12);
}

.md-callout-caution {
  border-color: #ef4444;
  background: rgba(239, 68, 68, 0.12);
}

/* Mermaid 主题适配：统一线条/文字颜色随主题 */
.mermaid svg {
  color: var(--mp-text);
}

.mermaid .node rect,
.mermaid .node circle,
.mermaid .node polygon,
.mermaid .node path {
  fill: rgba(255, 255, 255, 0.03);
  stroke: var(--mp-accent);
}

.mermaid .cluster rect {
  fill: rgba(255, 255, 255, 0.04);
  stroke: var(--mp-border);
}

.mermaid .edgePaths path {
  stroke: var(--mp-muted);
}

.mermaid .label,
.mermaid .edgeLabel,
.mermaid text {
  fill: var(--mp-text) !important;
  color: var(--mp-text) !important;
}

.mermaid .arrowheadPath {
  fill: var(--mp-muted);
  stroke: var(--mp-muted);
}

/* 让表格占满可用宽度，避免右侧空白 */
#write table {
  width: 100% !important;
  display: table !important;
  table-layout: auto;
}

#write table thead,
#write table tbody {
  width: 100%;
}

.md-callout-tip { border-color: #4ade80; }
.md-callout-important { border-color: #f59e0b; }
.md-callout-warning { border-color: #f97316; }
.md-callout-caution { border-color: #ef4444; }

.empty-state {
  text-align: center;
  padding: 40px 20px;
  color: var(--mp-muted);
}

@media (max-width: 780px) {
  .page-header {
    grid-template-columns: 1fr;
    position: static;
  }

  .content-wrapper {
    padding: 16px 14px;
  }

  #write {
    padding: 0;
  }
}
